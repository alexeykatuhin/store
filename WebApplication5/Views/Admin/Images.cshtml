@using WebApplication5.Models
@model IEnumerable<WebApplication5.Models.Image>


@{
    ViewBag.Title = "Images";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Images</h2>

<div class="panel-body">
	<table class="table table-striped table-condensed table-bordered">
		<tr>
			<th class="text-center">Главное фото</th>

			@if (Model.Count() > 1)
			{

				for (int i = 0; i < Model.Count() - 1; i++)
				{
					<th class="text-center">Доп. фото</th>
				}

			}
		</tr>
		
		<tr>
			<td>
				<img src="@Model.First(x=>x.IsHead).ImgUrl_75_75"/>
			</td>
			@if (Model.Count() > 1)
			{
				IEnumerable<Image> templst = Model.Where(x => !x.IsHead);
				foreach (Image image in templst)
				{
					<th>
						<img src="@image.ImgUrl_75_75"/>
					</th>
				}
			}
		</tr>
		<tr>
			@foreach (Image img in Model)
			{
				if (img.IsHead)
				 {
					 <th>
						 <a class="btn btn-primary" href="#">Редактировать</a>
					 </th>
				}
				else
				{
					<th>
						<ul>
							<li>
								<a class="btn btn-primary" href="#">Редактировать</a>
							</li>
							<li>
								<a class="btn btn-primary" href="#">Сделать главным</a>
							</li>
							<li>
								<a class="btn btn-primary" href="#">Удалить</a>
							</li>

						</ul>
						</th>
				}
			}
		</tr>


	</table>
	
	<a class="btn btn-primary" href="@Url.Action("AddPhoto", "Admin", new { ItemId = Model.ToList()[0].ItemId})">Добавить фото</a>
</div>














@*<div class="form-group">
	@using (Html.BeginForm("GetPhoto", "Admin",
		FormMethod.Post, new {enctype = "multipart/form-data"}))
	{
		<div style="position: relative;">
			<label>Картинка</label>

			<a class='btn' href='javascript:;'>
				Выберите файл...
				<input type="file" name="Image" size="40"
				       style="position: absolute; z-index: 2; top: 0; left: 0; filter: alpha(opacity=0); opacity: 0; background-color: transparent; color: transparent;"
				       onchange='$("#upload-file-info").html($(this).val()); $("#submitPhoto").removeAttr("disabled");'>

			</a>
			<span class='label label-info' id="upload-file-info"></span>
		</div>
		@Html.Hidden("Id", Model.ItemId)
		<input id="submitPhoto" type="submit" disabled="disabled" onclick="photo" value="Сохранить" class="btn btn-primary" />
	}
	@if (Model.ImgUrl == null)
	{
		<div class="form-control-static">Нет картинки</div>
	}
	else
	{
		<img id="upload-file" class="img-thumbnail" width="150" height="150"
		     src="@Model.ImgUrl"/>
	}
</div>

<script>
	function photo(obj) {
		
	}
</script>*@